@model Adapter.Controllers.QuestionOptions

@{
    ViewBag.Title = "Question";
}

<h2>Question</h2>


<div id="quizwaitdiv">
    <span> Quiz will start in few moments...</span>
</div>
@using (Html.BeginForm())
{
    <div id="quizpanel" style="display:none">

        @if (ViewBag.IsCompletedQuestions != true)
        {

            @Html.HiddenFor(x => x.Id)

            @Model.Description
            <br />
            foreach (var option in Model.OptionsList)
            {
                @Html.RadioButton("chkCorrectAnswer", option.IsAnswer) @option.Description
                <br />
            }

            @*<input type="submit" name="next" />*@
        }
        else
        {
            <p>Hi @ViewBag.UserName. You have successfully completed your quiz. You got @ViewBag.Score. Congratulations</p>
        }

        <button class="btn btn-primary" id="answerBtn">Answer</button>
    </div>
}


@if (ViewBag.FromPost == false)
{
    <script>

        $(document).ready(function () {
            var quizDate = new Date();
            var adjustedDate = quizDate.getTime() + 8000;
            var uiDate = new Date();
            setTimeout(function () {
                $("#quizpanel").show();
                $("#quizwaitdiv").hide();


            }, adjustedDate - uiDate.getTime());
        });
    </script>
}
else
{
    <script>
        $(document).ready(function () {
            $("#quizpanel").show();
            $("#quizwaitdiv").hide();
        });
    </script>
}
<script>
    $(document).ready(function () {


        $("#answerBtn").on("click", function () {
            $("#answerBtn").attr("disabled", true);
            setTimeout(function () {
                $("form").submit();
            }, 10000);
        });

    });
</script>
